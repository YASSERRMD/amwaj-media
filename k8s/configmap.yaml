apiVersion: v1
kind: ConfigMap
metadata:
  name: amwaj-config
  namespace: production
data:
  config.toml: |
    [server]
    host = "0.0.0.0"
    port = 50051
    worker_threads = 8

    [grpc]
    max_concurrent_streams = 1000
    keepalive_interval_ms = 10000
    keepalive_timeout_ms = 20000

    [webrtc]
    ice_servers = ["stun:stun.l.google.com:19302"]
    max_connections = 10000

    [audio]
    sample_rate = 16000
    channels = 1
    frame_duration_ms = 20
    voice_isolation_enabled = true
    voice_isolation_model = "/app/models/voice_isolation.onnx"

    [detection]
    vad_sensitivity = 0.6
    min_turn_duration_ms = 250
    max_silence_duration_ms = 400
    volume_threshold_db = -40

    [metrics]
    prometheus_port = 9090
    enable_latency_histograms = true

    [logging]
    level = "info"
    format = "json"
